"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.mongoQuery = void 0;
var mongoQuery = function (req, res, next) {
    if (!req.query) {
        return next();
    }
    try {
        var queryKeys = Object.keys(req.query);
        var query = {};
        var queryTemp = [];
        var curKey;
        for (var i = 0; i < queryKeys.length; i++) {
            curKey = req.query[queryKeys[i]];
            if (typeof curKey !== 'object') {
                query[queryKeys[i]] = curKey;
                continue;
            }
            queryTemp = Object.keys(curKey);
            for (var j = 0; j < queryTemp.length; j++) {
                query[queryKeys[i] + '.' + queryTemp[j]] = curKey[queryTemp[j]];
            }
        }
        req.mongoQuery = query;
    }
    catch (err) { }
    next();
};
exports.mongoQuery = mongoQuery;
